

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Actions.CliActions.cli_actions &mdash; Warrior Ninja documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Warrior Ninja documentation" href="../../../index.html"/>
        <link rel="up" title="Module code" href="../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../warrior_index.html" class="icon icon-home"> Warrior
          

          
          </a>

          
            
            
              <div class="version">
                Ninja
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Actions.html">Actions package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Framework.html">Framework package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../warrior_index.html">Warrior</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../warrior_index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>Actions.CliActions.cli_actions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for Actions.CliActions.cli_actions</h1><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Copyright 2017, Fujitsu Network Communications, Inc.</span>
<span class="sd">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="sd">you may not use this file except in compliance with the License.</span>
<span class="sd">You may obtain a copy of the License at</span>
<span class="sd">http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="sd">Unless required by applicable law or agreed to in writing, software</span>
<span class="sd">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="sd">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="sd">See the License for the specific language governing permissions and</span>
<span class="sd">limitations under the License.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">&quot;&quot;&quot;This is the cli_actions module that has all cli related keywords &quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">Framework.Utils</span> <span class="k">as</span> <span class="nn">Utils</span>
<span class="kn">from</span> <span class="nn">Framework.Utils</span> <span class="k">import</span> <span class="n">cli_Utils</span>
<span class="kn">from</span> <span class="nn">Framework.Utils.print_Utils</span> <span class="k">import</span> <span class="n">print_warning</span><span class="p">,</span> <span class="n">print_info</span><span class="p">,</span> <span class="n">print_error</span>
<span class="kn">from</span> <span class="nn">Framework.Utils.testcase_Utils</span> <span class="k">import</span> <span class="n">pNote</span>
<span class="kn">from</span> <span class="nn">Framework.Utils.data_Utils</span> <span class="k">import</span> <span class="n">getSystemData</span><span class="p">,</span>\
<span class="n">get_session_id</span><span class="p">,</span> <span class="n">get_credentials</span><span class="p">,</span> <span class="n">get_object_from_datarepository</span>
<span class="kn">from</span> <span class="nn">Framework.Utils.encryption_utils</span> <span class="k">import</span> <span class="n">decrypt</span>
<span class="kn">from</span> <span class="nn">WarriorCore.Classes.war_cli_class</span> <span class="k">import</span> <span class="n">WarriorCliClass</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">if</span> <span class="s1">&#39;linux&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">:</span>
        <span class="n">MOD</span> <span class="o">=</span> <span class="s1">&#39;pexpect&#39;</span>
        <span class="kn">import</span> <span class="nn">pexpect</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">,</span> <span class="n">err</span><span class="p">:</span>
    <span class="n">print_error</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
    <span class="n">print_info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">: </span><span class="si">{1}</span><span class="s2"> module is not installed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="n">MOD</span><span class="p">))</span>


<div class="viewcode-block" id="CliActions"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions">[docs]</a><span class="k">class</span> <span class="nc">CliActions</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;CliActions class which has methods(keywords)</span>
<span class="sd">    related to actions performed on any command line interface &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resultfile</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">config_Utils</span><span class="o">.</span><span class="n">resultfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datafile</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">config_Utils</span><span class="o">.</span><span class="n">datafile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logsdir</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">config_Utils</span><span class="o">.</span><span class="n">logsdir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">config_Utils</span><span class="o">.</span><span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logfile</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">config_Utils</span><span class="o">.</span><span class="n">logfile</span>

<div class="viewcode-block" id="CliActions.connect"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.connect">[docs]</a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;.*(%|#|\$)&quot;</span><span class="p">,</span> <span class="n">ip_type</span><span class="o">=</span><span class="s2">&quot;ip&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is a generic connect that can connect to ssh/telnet based</span>
<span class="sd">        on the conn_type provided by the user in the input datafile.</span>

<span class="sd">        :Datafile usage:</span>

<span class="sd">            Tags or attributes to be used in input datafile for the system or subsystem</span>
<span class="sd">            If both tag and attribute is provided the attribute will be used.</span>

<span class="sd">            1. ip = IP address of the system.\</span>

<span class="sd">                Default value for ip type is ip, it can take any type of ip&#39;s</span>
<span class="sd">                to connect to (like ipv4, ipv6, dns etc)</span>

<span class="sd">                Users can provide tag/attribute for any ip_type under the system</span>
<span class="sd">                in the input datafile and specify the tag/attribute name</span>
<span class="sd">                as the value for ip_type argument, then the connection will be</span>
<span class="sd">                established using that value.</span>

<span class="sd">            2. username = username for the  session.</span>
<span class="sd">            3. password = password for the  session.</span>
<span class="sd">            4. timeout = use if you want to set timeout while connecting,\</span>
<span class="sd">                used for both ssh and telnet</span>
<span class="sd">            5. prompt = for ssh connections, this is the prompt expected when\</span>
<span class="sd">                the connection is successful, not required for telnet.</span>
<span class="sd">            6. conn_type = the type of connection to be created (ssh/telnet).</span>
<span class="sd">            7. ssh_port = use this tag to provide ssh port to connect to, if\</span>
<span class="sd">                not provided default ssh port of 22 will be used.</span>
<span class="sd">            8. telnet_port = use this tag to provide a telnet port to connect to\</span>
<span class="sd">                if not provided default telnet port 23 will be used.</span>
<span class="sd">            9. conn_options = extra arguments that will be used when sending\</span>
<span class="sd">                the ssh/telnet command, default is empty</span>
<span class="sd">            10.custom_keystroke = a keystroke that will be sent after the initial\</span>
<span class="sd">                timeout, in case of server require a keystroke to show any prompt.</span>
<span class="sd">                Default is the enter key</span>


<span class="sd">        :Arguments:</span>
<span class="sd">            1. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem.</span>

<span class="sd">                    To connect to a system provided system_name=system_name.</span>

<span class="sd">                    To connect to a single subsystem provide</span>
<span class="sd">                    system_name=system_name[subsystem_name].</span>

<span class="sd">                    To connect to multiple subsystems provide</span>
<span class="sd">                    system_name=system_name[subsystem1_name,subsystem2_name..etc..].</span>

<span class="sd">                    To connect to all subsystems under a system provide</span>
<span class="sd">                    system_name=&quot;system_name[all]&quot;.</span>

<span class="sd">            2. session_name(string) = name of the session to the system.</span>
<span class="sd">            3. prompt(string) = prompt expected in the terminal.</span>
<span class="sd">            4. ip_type(string) = type of the ip address(ip, ipv4, ipv6, dns, etc).</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)= True / False.</span>
<span class="sd">            2. session_id (dict element)= an id is generated for each connection\</span>
<span class="sd">                and each connection is stored in the framework&#39;s data_repository.\</span>
<span class="sd">                session_id=system_name+subsystem_name+session_name.</span>
<span class="sd">            3. response dictionary(dict): an empty dictionary to store the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem.\</span>
<span class="sd">                This dictionary is available in warrior frameworks global data_repository\</span>
<span class="sd">                and can be retrieved using the key= &quot;session_id + _td_response&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Connect to the ssh/telnet port of the system&quot;</span>
        <span class="n">pNote</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
        <span class="c1">#Resolve system_name and subsystem_list</span>
        <span class="c1">#Removing duplicate subsystem entry and blank spaces in entry name</span>
        <span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_list</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">resolve_system_subsystem_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">system_name</span><span class="p">)</span>
        <span class="n">output_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">attempt</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">subsystem_list</span> <span class="o">==</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="n">subsystem_list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">attempt</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">subsystem_name</span> <span class="o">=</span> <span class="n">subsystem_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">subsystem_list</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="c1">#Put system_name in system_name[subsystem] format before calling</span>
            <span class="c1">#connect_ssh/connect_telnet.</span>
            <span class="n">call_system_name</span> <span class="o">=</span> <span class="n">system_name</span> <span class="k">if</span> <span class="n">subsystem_name</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">[</span><span class="si">{1}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_name</span><span class="p">)</span>
            <span class="n">conn_type</span> <span class="o">=</span> <span class="n">getSystemData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">call_system_name</span><span class="p">,</span> <span class="s2">&quot;conn_type&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">conn_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">conn_type</span> <span class="o">==</span> <span class="s2">&quot;ssh&quot;</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">,</span> <span class="n">output_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect_ssh</span><span class="p">(</span><span class="n">call_system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">ip_type</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">conn_type</span> <span class="o">==</span> <span class="s2">&quot;telnet&quot;</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">,</span> <span class="n">output_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect_telnet</span><span class="p">(</span><span class="n">call_system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">,</span> <span class="n">ip_type</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;&lt;conn_type&gt;=</span><span class="si">{0}</span><span class="s2"> provided for &#39;</span><span class="si">{1}</span><span class="s2">&#39; is  not &quot;</span>\
                          <span class="s2">&quot;supported&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">conn_type</span><span class="p">,</span> <span class="n">call_system_name</span><span class="p">),</span> <span class="s2">&quot;error&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;conn_type not provided for system=</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">call_system_name</span><span class="p">),</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">status</span> <span class="ow">and</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">status</span><span class="p">,</span> <span class="n">output_dict</span></div>

<div class="viewcode-block" id="CliActions.disconnect"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Disconnects/Closes  session established with the system</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem.</span>

<span class="sd">                    To connect to a system provided system_name=system_name.</span>

<span class="sd">                    To connect to a single subsystem provide</span>
<span class="sd">                    system_name=system_name[subsystem_name].</span>

<span class="sd">                    To connect to multiple subsystems provide</span>
<span class="sd">                    system_name=system_name[subsystem1_name,subsystem2_name..etc..].</span>

<span class="sd">                    To connect to all subsystems under a system provide</span>
<span class="sd">                    system_name=&quot;system_name[all]&quot;.</span>
<span class="sd">            2. session_name(string) = name of the session to the system</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)= True / False</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Disconnects/Closes  session established with the system/subsystem&quot;</span>
        <span class="c1">#Resolve system_name and subsystem_list</span>
        <span class="c1">#Removing duplicate subsystem entry and blank spaces in entry name</span>
        <span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_list</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">resolve_system_subsystem_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">system_name</span><span class="p">)</span>
        <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">attempt</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">subsystem_list</span> <span class="o">==</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="n">subsystem_list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">attempt</span><span class="p">):</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
            <span class="n">subsystem_name</span> <span class="o">=</span> <span class="n">subsystem_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">subsystem_list</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="n">call_system_name</span> <span class="o">=</span> <span class="n">system_name</span> <span class="k">if</span> <span class="n">subsystem_name</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">[</span><span class="si">{1}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_name</span><span class="p">)</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pSubStep</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">)</span>
            <span class="n">session_id</span> <span class="o">=</span> <span class="n">get_session_id</span><span class="p">(</span><span class="n">call_system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
            <span class="n">session_object</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_object_from_datarepository</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span>
            <span class="n">msg1</span> <span class="o">=</span> <span class="s2">&quot;Disconnect successful for system_name=</span><span class="si">{0}</span><span class="s2">, &quot;</span>\
                   <span class="s2">&quot;session_name=</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
            <span class="n">msg2</span> <span class="o">=</span> <span class="s2">&quot;Disconnection of system_name=</span><span class="si">{0}</span><span class="s2">, &quot;</span>\
                   <span class="s2">&quot;session_name=</span><span class="si">{1}</span><span class="s2"> Failed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">WarriorCliClass</span><span class="o">.</span><span class="n">cmdprint</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">session_object</span><span class="p">,</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">):</span>
                <span class="c1"># execute smart action to produce user report</span>
                <span class="n">connect_testdata</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_object_from_datarepository</span><span class="p">(</span><span class="n">session_id</span><span class="o">+</span><span class="s2">&quot;_system&quot;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">connect_testdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">connect_testdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">smart_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">call_system_name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">session_object</span><span class="p">,</span> <span class="s2">&quot;disconnect&quot;</span><span class="p">,</span> <span class="n">connect_testdata</span><span class="p">)</span>

                <span class="n">session_object</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">session_object</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">session_object</span><span class="o">.</span><span class="n">isalive</span><span class="p">()</span> <span class="k">else</span> <span class="kc">True</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;session does not exist&quot;</span><span class="p">,</span> <span class="s2">&quot;warning&quot;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="n">msg</span> <span class="o">=</span> <span class="n">msg1</span> <span class="k">if</span> <span class="n">result</span> <span class="k">else</span> <span class="n">msg2</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">report_substep_status</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">status</span> <span class="ow">and</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">status</span></div>

<div class="viewcode-block" id="CliActions.connect_ssh"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.connect_ssh">[docs]</a>    <span class="k">def</span> <span class="nf">connect_ssh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;.*(%|#|\$)&quot;</span><span class="p">,</span> <span class="n">ip_type</span><span class="o">=</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">int_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Connects to the ssh port of the the given system or subsystems</span>

<span class="sd">        :Datafile usage:</span>

<span class="sd">            Tags or attributes to be used in input datafile for the system or subsystem</span>
<span class="sd">            If both tag and attribute is provided the attribute will be used.</span>

<span class="sd">            1. ip = IP address of the system.\</span>

<span class="sd">                Default value for ip type is ip, it can take any type of ip&#39;s</span>
<span class="sd">                to connect to (like ipv4, ipv6, dns etc)</span>

<span class="sd">                Users can provide tag/attribute for any ip_type under the system</span>
<span class="sd">                in the input datafile and specify the tag/attribute name</span>
<span class="sd">                as the value for ip_type argument, then the connection will be</span>
<span class="sd">                established using that value.</span>

<span class="sd">            2. username = username for the ssh session</span>
<span class="sd">            3. password = password for the ssh session</span>
<span class="sd">            4. timeout = use if you want to set timeout while connecting</span>
<span class="sd">            5. prompt = the prompt expected when the connection is successful</span>
<span class="sd">            6. ssh_port = use this tag to provide a ssh port to connect to,\</span>
<span class="sd">                if not provided default ssh port 22 will be used.</span>
<span class="sd">            7. conn_options = extra arguments that will be used when sending\</span>
<span class="sd">                the ssh/telnet command, default is empty</span>
<span class="sd">            8. custom_keystroke = a keystroke that will be sent after the initial\</span>
<span class="sd">                timeout, in case of server require a keystroke to show any prompt.</span>
<span class="sd">                Default is the enter key</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem.</span>

<span class="sd">                    To connect to a system provided system_name=system_name.</span>

<span class="sd">                    To connect to a single subsystem provide</span>
<span class="sd">                    system_name=system_name[subsystem_name].</span>

<span class="sd">                    To connect to multiple subsystems provide</span>
<span class="sd">                    system_name=system_name[subsystem1_name,subsystem2_name..etc..].</span>

<span class="sd">                    To connect to all subsystems under a system provide</span>
<span class="sd">                    system_name=&quot;system_name[all]&quot;.</span>
<span class="sd">            2. session_name(string) = name of the session to the system/subsystem.</span>
<span class="sd">            3. prompt(string) = prompt expected in the terminal</span>
<span class="sd">            4. ip_type(string) = type of the ip address(ip, ipv4, ipv6, dns, etc).</span>
<span class="sd">            5. int_timeout(int) = use this to set timeout value for commands\</span>
<span class="sd">                issued in this session.</span>


<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)= True / False.</span>
<span class="sd">            2. session_id (dict element)= an id is generated for each connection\</span>
<span class="sd">                and each connection is stored in the framework&#39;s data_repository.\</span>
<span class="sd">                session_id=system_name+subsystem_name+session_name.</span>
<span class="sd">            3. response dictionary(dict): an empty dictionary to store the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem.\</span>
<span class="sd">                This dictionary is available in warrior frameworks global data_repository\</span>
<span class="sd">                and can be retrieved using the key= &quot;session_id + _td_response&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Connect to the ssh port of the system/subsystem and creates a session&quot;</span>
        <span class="c1">#Resolve system_name and subsystem_list</span>
        <span class="c1">#Removing duplicate subsystem entry and blank spaces in entry name</span>
        <span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_list</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">resolve_system_subsystem_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">system_name</span><span class="p">)</span>
        <span class="n">output_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">attempt</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">subsystem_list</span> <span class="o">==</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="n">subsystem_list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">attempt</span><span class="p">):</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pSubStep</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
            <span class="c1">#Get name from the list when it&#39;s not &#39;None&#39;, otherwise, set it to &#39;None&#39;</span>
            <span class="n">subsystem_name</span> <span class="o">=</span> <span class="n">subsystem_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">subsystem_list</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="n">call_system_name</span> <span class="o">=</span> <span class="n">system_name</span> <span class="k">if</span> <span class="n">subsystem_name</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">[</span><span class="si">{1}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_name</span><span class="p">)</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="n">get_credentials</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">call_system_name</span><span class="p">,</span>
                                          <span class="p">[</span><span class="n">ip_type</span><span class="p">,</span> <span class="s1">&#39;ssh_port&#39;</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span>
                                           <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;prompt&#39;</span><span class="p">,</span> <span class="s1">&#39;timeout&#39;</span><span class="p">,</span>
                                           <span class="s1">&#39;conn_options&#39;</span><span class="p">,</span> <span class="s1">&#39;custom_keystroke&#39;</span><span class="p">])</span>
            <span class="c1"># parse more things here</span>
            <span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;system=</span><span class="si">{0}</span><span class="s2">, session=</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">call_system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">))</span>
            <span class="n">session_id</span> <span class="o">=</span> <span class="n">get_session_id</span><span class="p">(</span><span class="n">call_system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">credentials</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">credentials</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;custom_keystroke&quot;</span><span class="p">]:</span>
                    <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;custom_keystroke&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wctrl:M&quot;</span>
                <span class="n">credentials</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">get_connection_port</span><span class="p">(</span><span class="s2">&quot;ssh&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="p">)</span>
                <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;logfile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">file_Utils</span><span class="o">.</span><span class="n">getCustomLogFile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
                                                                           <span class="bp">self</span><span class="o">.</span><span class="n">logsdir</span><span class="p">,</span>
                                                                           <span class="s1">&#39;ssh_</span><span class="si">%s</span><span class="s1">_&#39;</span> <span class="o">%</span> <span class="n">session_id</span><span class="p">)</span>
                <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">prompt</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">]</span>\
                <span class="k">else</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">]</span>
                <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">int_timeout</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span>\
                <span class="k">else</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span>
                <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">decrypt</span><span class="p">(</span><span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">])</span>
                <span class="c1">#Get ip address</span>
                <span class="k">if</span> <span class="n">ip_type</span> <span class="o">==</span> <span class="s1">&#39;ip&#39;</span><span class="p">:</span>
                    <span class="n">session_object</span><span class="p">,</span> <span class="n">conn_string</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">connect_ssh</span><span class="p">(</span><span class="o">**</span><span class="n">credentials</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ip</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">[</span><span class="n">ip_type</span><span class="p">]</span>
                    <span class="n">session_object</span><span class="p">,</span> <span class="n">conn_string</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">connect_ssh</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="o">**</span><span class="n">credentials</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">session_object</span><span class="p">,</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">):</span>
                    <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">session_object</span>
                    <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span> <span class="o">+</span> <span class="s2">&quot;_connstring&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span> <span class="o">+</span> <span class="s2">&quot;_td_response&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Connection to system-subsystem&quot;</span>\
                          <span class="s2">&quot;-session=</span><span class="si">{0}</span><span class="s2">-</span><span class="si">{1}</span><span class="s2">-</span><span class="si">{2}</span><span class="s2"> is successful&quot;</span>\
                          <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_name</span><span class="p">,</span>\
                                  <span class="n">session_name</span><span class="p">))</span>

                    <span class="c1"># execute smart action to produce user report</span>
                    <span class="n">smart_result</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">smart_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">call_system_name</span><span class="p">,</span> <span class="n">conn_string</span><span class="p">,</span> <span class="n">session_object</span><span class="p">,</span> <span class="s2">&quot;connect&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">smart_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span> <span class="o">+</span> <span class="s2">&quot;_system&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">smart_result</span>

                <span class="k">elif</span> <span class="n">WarriorCliClass</span><span class="o">.</span><span class="n">cmdprint</span><span class="p">:</span>
                    <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">session_id</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Connection to system-subsystem&quot;</span>\
                          <span class="s2">&quot;-session=</span><span class="si">{0}</span><span class="s2">-</span><span class="si">{1}</span><span class="s2">-</span><span class="si">{2}</span><span class="s2"> Failed&quot;</span>\
                          <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_name</span><span class="p">,</span>
                                  <span class="n">session_name</span><span class="p">),</span> <span class="s2">&quot;warning&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">update_datarepository</span><span class="p">(</span><span class="n">output_dict</span><span class="p">)</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">report_substep_status</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">status</span> <span class="ow">and</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">status</span><span class="p">,</span> <span class="n">output_dict</span></div>

<div class="viewcode-block" id="CliActions.connect_telnet"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.connect_telnet">[docs]</a>    <span class="k">def</span> <span class="nf">connect_telnet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ip_type</span><span class="o">=</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">int_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Connects to the telnet port of the the given system and/or subsystem and creates a</span>
<span class="sd">        pexpect session object for the system</span>

<span class="sd">        A session_id is created using the combination system_name+session_name,</span>
<span class="sd">        system_name+subsystem+session_name and returned by this keyword to be stored</span>
<span class="sd">        in Warrior framework&#39;s data repository</span>

<span class="sd">        :Datafile usage:</span>

<span class="sd">            Tags or attributes to be used in input datafile for the system or subsystem</span>
<span class="sd">            If both tag and attribute is provided the attribute will be used.</span>

<span class="sd">            1. ip = IP address of the system.\</span>

<span class="sd">                Default value for ip type is ip, it can take any type of ip&#39;s</span>
<span class="sd">                to connect to (like ipv4, ipv6, dns etc)</span>

<span class="sd">                Users can provide tag/attribute for any ip_type under the system</span>
<span class="sd">                in the input datafile and specify the tag/attribute name</span>
<span class="sd">                as the value for ip_type argument, then the connection will be</span>
<span class="sd">                established using that value.</span>

<span class="sd">            2. username = username for the ssh session</span>
<span class="sd">            3. password = password for the ssh session</span>
<span class="sd">            4. prompt = prompt expected in the terminal</span>
<span class="sd">            5. timeout = use if you want to set timeout while connecting.</span>
<span class="sd">            6. telnet_port = use this tag to provide a telnet port to connect to,\</span>
<span class="sd">                if not provided default telnet port 23 will be used.</span>
<span class="sd">            7. conn_options = extra arguments that will be used when sending\</span>
<span class="sd">                the ssh/telnet command, default is empty</span>
<span class="sd">            8. custom_keystroke = a keystroke that will be sent after the initial\</span>
<span class="sd">                timeout, in case of server require a keystroke to show any prompt.</span>
<span class="sd">                Default is the enter key</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem.</span>

<span class="sd">                    To connect to a system provided system_name=system_name.</span>

<span class="sd">                    To connect to a single subsystem provide</span>
<span class="sd">                    system_name=system_name[subsystem_name].</span>

<span class="sd">                    To connect to multiple subsystems provide</span>
<span class="sd">                    system_name=system_name[subsystem1_name,subsystem2_name..etc..].</span>

<span class="sd">                    To connect to all subsystems under a system provide</span>
<span class="sd">                    system_name=&quot;system_name[all]&quot;.</span>
<span class="sd">            2. session_name(string) = name of the session to the system</span>
<span class="sd">            3. ip_type(string) = type of the ip address(ip, ipv4, ipv6, dns, etc).</span>
<span class="sd">            4. timeout(int) = use this to set timeout value for commands\</span>
<span class="sd">                issued in this session.</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)= True / False.</span>
<span class="sd">            2. session_id (dict element)= an id is generated for each connection\</span>
<span class="sd">                and each connection is stored in the framework&#39;s data_repository.\</span>
<span class="sd">                session_id=system_name+subsystem_name+session_name</span>
<span class="sd">            3. response dictionary(dict): an empty dictionary to store the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem.\</span>
<span class="sd">                This dictionary is available in warrior frameworks global data_repository\</span>
<span class="sd">                and can be retrieved using the key= &quot;session_id + _td_response&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Connect to the telnet port of the system and creates a session&quot;</span>
        <span class="c1">#Resolve system_name and subsystem_list</span>
        <span class="c1">#Removing duplicate subsystem entry and blank spaces in entry name</span>
        <span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_list</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">resolve_system_subsystem_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">system_name</span><span class="p">)</span>
        <span class="n">output_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">attempt</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">subsystem_list</span> <span class="o">==</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="n">subsystem_list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">attempt</span><span class="p">):</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pSubStep</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
            <span class="c1">#Get name from the list when it&#39;s not &#39;None&#39;, otherwise, set it to &#39;None&#39;</span>
            <span class="n">subsystem_name</span> <span class="o">=</span> <span class="n">subsystem_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">subsystem_list</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="n">call_system_name</span> <span class="o">=</span> <span class="n">system_name</span> <span class="k">if</span> <span class="n">subsystem_name</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">[</span><span class="si">{1}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_name</span><span class="p">)</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="n">get_credentials</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">call_system_name</span><span class="p">,</span>
                                          <span class="p">[</span><span class="n">ip_type</span><span class="p">,</span> <span class="s1">&#39;telnet_port&#39;</span><span class="p">,</span><span class="s1">&#39;username&#39;</span><span class="p">,</span>
                                           <span class="s1">&#39;prompt&#39;</span><span class="p">,</span><span class="s1">&#39;password&#39;</span><span class="p">,</span><span class="s1">&#39;timeout&#39;</span><span class="p">,</span> <span class="s1">&#39;conn_options&#39;</span><span class="p">,</span> <span class="s1">&#39;custom_keystroke&#39;</span><span class="p">])</span>
            <span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;system=</span><span class="si">{0}</span><span class="s2">, session=</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">call_system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">))</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="n">Utils</span><span class="o">.</span><span class="n">file_Utils</span><span class="o">.</span><span class="n">getDateTime</span><span class="p">())</span>
            <span class="n">session_id</span> <span class="o">=</span> <span class="n">get_session_id</span><span class="p">(</span><span class="n">call_system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">credentials</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">credentials</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;custom_keystroke&quot;</span><span class="p">]:</span>
                    <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;custom_keystroke&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wctrl:M&quot;</span>
                <span class="n">credentials</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">get_connection_port</span><span class="p">(</span><span class="s2">&quot;telnet&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="p">)</span>
                <span class="n">credentials</span><span class="p">[</span><span class="s1">&#39;logfile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">file_Utils</span><span class="o">.</span><span class="n">getCustomLogFile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
                                                                           <span class="bp">self</span><span class="o">.</span><span class="n">logsdir</span><span class="p">,</span>
                                                                           <span class="s1">&#39;telnet_</span><span class="si">{0}</span><span class="s1">_&#39;</span>\
                                                                           <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">session_id</span><span class="p">))</span>
                <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">int_timeout</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span>\
                <span class="k">else</span> <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span>
                <span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">decrypt</span><span class="p">(</span><span class="n">credentials</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">])</span>
                <span class="c1">#Get ip address</span>
                <span class="k">if</span> <span class="n">ip_type</span> <span class="o">==</span> <span class="s1">&#39;ip&#39;</span><span class="p">:</span>
                    <span class="n">session_object</span><span class="p">,</span> <span class="n">conn_string</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">connect_telnet</span><span class="p">(</span><span class="o">**</span><span class="n">credentials</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ip</span> <span class="o">=</span> <span class="n">credentials</span><span class="p">[</span><span class="n">ip_type</span><span class="p">]</span>
                    <span class="n">session_object</span><span class="p">,</span> <span class="n">conn_string</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">connect_telnet</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="o">**</span><span class="n">credentials</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">session_object</span><span class="p">,</span> <span class="n">pexpect</span><span class="o">.</span><span class="n">spawn</span><span class="p">):</span>
                    <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">session_object</span>
                    <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span> <span class="o">+</span> <span class="s2">&quot;_connstring&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">conn_string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span> <span class="o">+</span> <span class="s2">&quot;_td_response&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Connection to system-subsystem&quot;</span>\
                                               <span class="s2">&quot;-session=</span><span class="si">{0}</span><span class="s2">-</span><span class="si">{1}</span><span class="s2">-</span><span class="si">{2}</span><span class="s2"> is successful&quot;</span>\
                                               <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_name</span><span class="p">,</span> \
                                                       <span class="n">session_name</span><span class="p">))</span>

                    <span class="c1"># execute smart action to produce user report</span>
                    <span class="n">smart_result</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">smart_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">call_system_name</span><span class="p">,</span> <span class="n">conn_string</span><span class="p">,</span> <span class="n">session_object</span><span class="p">,</span> <span class="s2">&quot;connect&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">smart_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span> <span class="o">+</span> <span class="s2">&quot;_system&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">smart_result</span>

                <span class="k">elif</span> <span class="n">WarriorCliClass</span><span class="o">.</span><span class="n">cmdprint</span><span class="p">:</span>
                    <span class="n">output_dict</span><span class="p">[</span><span class="n">session_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">session_id</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Connection to system-subsystem&quot;</span>\
                                               <span class="s2">&quot;-session=</span><span class="si">{0}</span><span class="s2">-</span><span class="si">{1}</span><span class="s2">-</span><span class="si">{2}</span><span class="s2"> Failed&quot;</span>\
                                               <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">subsystem_name</span><span class="p">,</span> \
                                                       <span class="n">session_name</span><span class="p">),</span> <span class="s2">&quot;warning&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">update_datarepository</span><span class="p">(</span><span class="n">output_dict</span><span class="p">)</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">report_substep_status</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">status</span> <span class="ow">and</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">status</span><span class="p">,</span> <span class="n">output_dict</span></div>


<div class="viewcode-block" id="CliActions.send_command"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.send_command">[docs]</a>    <span class="k">def</span> <span class="nf">send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">start_prompt</span><span class="o">=</span><span class="s1">&#39;.*&#39;</span><span class="p">,</span> <span class="n">end_prompt</span><span class="o">=</span><span class="s1">&#39;.*&#39;</span><span class="p">,</span> <span class="n">int_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sends a command to a system or a subsystem</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. command(string)      = the command to be sent to the system</span>
<span class="sd">            2. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem. In case of subsystem only\</span>
<span class="sd">                single subsystem is supported. Format for subsystem\</span>
<span class="sd">                is &quot;system_name[subsystem_name]&quot;</span>
<span class="sd">            3. session_name(string) = name of the session to the system</span>
<span class="sd">            4. start_prompt(string) = starting prompt for the command</span>
<span class="sd">            5. end_prompt(string) = ending prompt for the command</span>
<span class="sd">            6. int_timeout (integer) = timeout for the command</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. command_status(bool)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Send cli command to the provided system&quot;</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pSubStep</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">)</span>

        <span class="n">session_id</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_session_id</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
        <span class="n">session_object</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_object_from_datarepository</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">session_object</span><span class="p">:</span>
            <span class="n">command_status</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">cli_Utils</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="n">session_object</span><span class="p">,</span> <span class="n">start_prompt</span><span class="p">,</span>
                                                                    <span class="n">end_prompt</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">int_timeout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">print_warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">-</span><span class="si">%s</span><span class="s2"> is not available for use&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">))</span>
            <span class="n">command_status</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">report_substep_status</span><span class="p">(</span><span class="n">command_status</span><span class="p">)</span>
        <span class="k">return</span>  <span class="n">command_status</span></div>

<div class="viewcode-block" id="CliActions.send_all_testdata_commands"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.send_all_testdata_commands">[docs]</a>    <span class="k">def</span> <span class="nf">send_all_testdata_commands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">var_sub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">td_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vc_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends all commands from all rows that are marked execute=yes from the testdata</span>

<span class="sd">        This keyword expects the usage of warrior framework&#39;s</span>
<span class="sd">        recommended testdata xml files, sample testdata file is</span>
<span class="sd">        available in Warriorspace/Config_files/sample/testdata_sample.xml</span>

<span class="sd">        :Datafile usage:</span>

<span class="sd">            Tags or attributes to be used in input datafile for the system or subsystem</span>
<span class="sd">            If both tag and attribute is provided the attribute will be used.</span>

<span class="sd">            1. testdata = absolute/relative path of the testdata file.</span>
<span class="sd">            2. variable_config = absolute/relative path of the variable\</span>
<span class="sd">                                config file.</span>

<span class="sd">            By default the &quot;testdata&quot; and &quot;variable_config&quot; tag/attribute</span>
<span class="sd">            will be used to get the details of testdata and variable config file.</span>
<span class="sd">            If a different tag/attribute name is used, provide the tagnames</span>
<span class="sd">            as the value to the arguments td_tag and vc_tag.</span>


<span class="sd">        :Arguments:</span>
<span class="sd">            1. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem. In case of subsystem only\</span>
<span class="sd">                single subsystem is supported. Format for subsystem\</span>
<span class="sd">                is &quot;system_name[subsystem_name]&quot;</span>
<span class="sd">            2. session_name(string) = name of the session to the string</span>
<span class="sd">            3. var_sub(string) = the pattern [var_sub] in the testdata commands,\</span>
<span class="sd">                                 start_prompt, end_prompt, verification search\</span>
<span class="sd">                                 will substituted with this value.</span>
<span class="sd">            4. description(string) = optional description string that overwrites the\</span>
<span class="sd">                                default description(wdesc) of the keyword.</span>
<span class="sd">                                This string will be printed as the keyword description\</span>
<span class="sd">                                in console logs and result files.</span>
<span class="sd">            5. td_tag = custom tag/attribute name of testdata file.</span>
<span class="sd">            6. vc_tag = custom tag/attribute name of variable conig file.</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)</span>
<span class="sd">            2. response dictionary(dict): a dictionary having the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem. This dictionary\</span>
<span class="sd">                is available in warrior frameworks global data_repository and can be\</span>
<span class="sd">                retrieved using the key= &quot;session_id + _td_response&quot; where\</span>
<span class="sd">                session_id=&quot;system_name+subsystem_name+session_name&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Send commands from rows marked execute=yes in the test data of the system&quot;</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">wdesc</span> <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">description</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_testdata_command_kw</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">var_sub</span><span class="p">,</span>
                                             <span class="n">td_tag</span><span class="p">,</span> <span class="n">vc_tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="CliActions.send_commands_by_testdata_rownum"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.send_commands_by_testdata_rownum">[docs]</a>    <span class="k">def</span> <span class="nf">send_commands_by_testdata_rownum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span>
                                         <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">var_sub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                         <span class="n">td_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vc_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sends all the commands from testdata that has row equal to the</span>
<span class="sd">        provided row_num</span>

<span class="sd">        This keyword expects the usage of warrior framework&#39;s</span>
<span class="sd">        recommended testdata xml files, sample testdata file is</span>
<span class="sd">        available in Warriorspace/Config_files/sample/testdata_sample.xml</span>

<span class="sd">        :Datafile usage:</span>

<span class="sd">            Tags or attributes to be used in input datafile for the system or subsystem</span>
<span class="sd">            If both tag and attribute is provided the attribute will be used.</span>

<span class="sd">            1. testdata = absolute/relative path of the testdata file.</span>
<span class="sd">            2. variable_config = absolute/relative path of the variable\</span>
<span class="sd">                                config file.</span>

<span class="sd">            By default the &quot;testdata&quot; and &quot;variable_config&quot; tag/attribute</span>
<span class="sd">            will be used to get the details of testdata and variable config file.</span>
<span class="sd">            If a different tag/attribute name is used, provide the tagnames</span>
<span class="sd">            as the value to the arguments td_tag and vc_tag.</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. row_num (string) = row number in string representation</span>
<span class="sd">            2. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem. In case of subsystem only\</span>
<span class="sd">                single subsystem is supported. Format for subsystem\</span>
<span class="sd">                is &quot;system_name[subsystem_name]&quot;</span>
<span class="sd">            3. session_name(string) = name of the session to the string\</span>
<span class="sd">            4. var_sub(string) = the pattern [var_sub] in the testdata commands,\</span>
<span class="sd">                                 start_prompt, end_prompt, verification search\</span>
<span class="sd">                                 will substituted with this value.</span>
<span class="sd">            5. description(string) = optional description string that overwrites the\</span>
<span class="sd">                                default description(wdesc) of the keyword.\</span>
<span class="sd">                                This string will be printed as the keyword description\</span>
<span class="sd">                                in console logs and result files.</span>
<span class="sd">            6. td_tag = custom tag/attribute name of testdata file</span>
<span class="sd">            7. vc_tag = custom tag/attribute name of variable config file.</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)</span>
<span class="sd">            2. response dictionary(dict): a dictionary having the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem. This dictionary\</span>
<span class="sd">                is available in warrior frameworks global data_repository and can be\</span>
<span class="sd">                retrieved using the key= &quot;session_id + _td_response&quot; where\</span>
<span class="sd">                session_id=&quot;system_name+subsystem_name+session_name&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Send commands by row num of testdata file&quot;</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">wdesc</span> <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">description</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_testdata_command_kw</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">,</span>
                                             <span class="n">desc</span><span class="p">,</span> <span class="n">var_sub</span><span class="p">,</span> <span class="n">row_num</span><span class="o">=</span><span class="n">row_num</span><span class="p">,</span>
                                             <span class="n">td_tag</span><span class="o">=</span><span class="n">td_tag</span><span class="p">,</span> <span class="n">vc_tag</span><span class="o">=</span><span class="n">vc_tag</span><span class="p">)</span></div>

<div class="viewcode-block" id="CliActions.send_commands_by_testdata_title"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.send_commands_by_testdata_title">[docs]</a>    <span class="k">def</span> <span class="nf">send_commands_by_testdata_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                        <span class="n">var_sub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                        <span class="n">td_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vc_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sends all the commands from testdata that has title equal to the</span>
<span class="sd">        provided title</span>

<span class="sd">        This keyword expects the usage of warrior framework&#39;s</span>
<span class="sd">        recommended testdata xml files, sample testdata file is</span>
<span class="sd">        available in Warriorspace/Config_files/sample/testdata_sample.xml</span>

<span class="sd">        :Datafile usage:</span>

<span class="sd">            Tags or attributes to be used in input datafile for the system or subsystem</span>
<span class="sd">            If both tag and attribute is provided the attribute will be used.</span>

<span class="sd">            1. testdata = absolute/relative path of the testdata file.</span>
<span class="sd">            2. variable_config = absolute/relative path of the variable\</span>
<span class="sd">                                config file.</span>

<span class="sd">            By default the &quot;testdata&quot; and &quot;variable_config&quot; tag/attribute</span>
<span class="sd">            will be used to get the details of testdata and variable config file.</span>
<span class="sd">            If a different tag/attribute name is used, provide the tagname</span>
<span class="sd">            as the value to the arguments td_tag and vc_tag.</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. title (string) = title in string representation</span>
<span class="sd">            2. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem. In case of subsystem only\</span>
<span class="sd">                single subsystem is supported. Format for subsystem\</span>
<span class="sd">                is &quot;system_name[subsystem_name]&quot;</span>
<span class="sd">            3. session_name(string) = name of the session to the string\</span>
<span class="sd">            4. var_sub(string) = the pattern [var_sub] in the testdata commands,\</span>
<span class="sd">                                 start_prompt, end_prompt, verification search\</span>
<span class="sd">                                 will substituted with this value.</span>
<span class="sd">            5. description(string) = optional description string that overwrites the\</span>
<span class="sd">                                default description(wdesc) of the keyword.\</span>
<span class="sd">                                This string will be printed as the keyword description\</span>
<span class="sd">                                in console logs and result files.</span>
<span class="sd">            6. td_tag = custom tag/attribute name of testdata file.</span>
<span class="sd">            7. vc_tag = custom tag/attribute name of variable config file.</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)</span>
<span class="sd">            2. response dictionary(dict): a dictionary having the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem. This dictionary\</span>
<span class="sd">                is available in warrior frameworks global data_repository and can be\</span>
<span class="sd">                retrieved using the key= &quot;session_id + _td_response&quot; where\</span>
<span class="sd">                session_id=&quot;system_name+subsystem_name+session_name&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Send commands by title of testdata file&quot;</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">wdesc</span> <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">description</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_testdata_command_kw</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">var_sub</span><span class="p">,</span>
                                             <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">td_tag</span><span class="o">=</span><span class="n">td_tag</span><span class="p">,</span> <span class="n">vc_tag</span><span class="o">=</span><span class="n">vc_tag</span><span class="p">)</span></div>

<div class="viewcode-block" id="CliActions.send_commands_by_testdata_title_rownum"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.send_commands_by_testdata_title_rownum">[docs]</a>    <span class="k">def</span> <span class="nf">send_commands_by_testdata_title_rownum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span>
                                               <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">var_sub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                               <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">td_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vc_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sends all the commands from testdata that has title/row equal to the</span>
<span class="sd">        provided title/row_num</span>

<span class="sd">        This keyword expects the usage of warrior framework&#39;s</span>
<span class="sd">        recommended testdata xml files, sample testdata file is</span>
<span class="sd">        available in Warriorspace/Config_files/sample/testdata_sample.xml</span>

<span class="sd">        :Datafile usage:</span>

<span class="sd">            Tags or attributes to be used in input datafile for the system or subsystem</span>
<span class="sd">            If both tag and attribute is provided the attribute will be used.</span>

<span class="sd">            1. testdata = absolute/relative path of the testdata file.</span>
<span class="sd">            2. variable_config = absolute/relative path of the variable\</span>
<span class="sd">                                config file.</span>

<span class="sd">            By default the &quot;testdata&quot; and &quot;variable_config&quot; tag/attribute</span>
<span class="sd">            will be used to get the details of testdata and variable config file.</span>
<span class="sd">            If a different tag/attribute name is used, provide the tagnames</span>
<span class="sd">            as the value to the arguments td_tag and vc_tag.</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. title = Title of the testdata block</span>
<span class="sd">            2. row = Row number of the testdata block</span>
<span class="sd">            3. system_name (string) = This can be name of the\</span>
<span class="sd">                system or a subsystem. In case of subsystem only\</span>
<span class="sd">                single subsystem is supported. Format for subsystem\</span>
<span class="sd">                is &quot;system_name[subsystem_name]&quot;</span>
<span class="sd">            4. session_name(string) = name of the session to the string</span>
<span class="sd">            5. var_sub(string) = the pattern [var_sub] in the testdata commands,\</span>
<span class="sd">                                 start_prompt, end_prompt, verification search\</span>
<span class="sd">                                 will substituted with this value.</span>
<span class="sd">            6. description(string) = optional description string that overwrites the\</span>
<span class="sd">                                default description(wdesc) of the keyword.\</span>
<span class="sd">                                This string will be printed as the keyword description\</span>
<span class="sd">                                in console logs and result files.</span>
<span class="sd">            7. td_tag = custom tag/attribute name of testdata file.</span>
<span class="sd">            8. vc_tag = custom tag/attribute name of variable config file.</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)</span>
<span class="sd">            2. response dictionary(dict): a dictionary having the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem. This dictionary\</span>
<span class="sd">                is available in warrior frameworks global data_repository and can be\</span>
<span class="sd">                retrieved using the key= &quot;session_id + _td_response&quot; where\</span>
<span class="sd">                session_id=&quot;system_name+subsystem_name+session_name&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Send commands by title, row &amp; execute=yes in the test data of the system&quot;</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">wdesc</span> <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">description</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_testdata_command_kw</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">,</span>
                                             <span class="n">desc</span><span class="p">,</span> <span class="n">var_sub</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">row_num</span><span class="o">=</span><span class="n">row_num</span><span class="p">,</span>
                                             <span class="n">td_tag</span><span class="o">=</span><span class="n">td_tag</span><span class="p">,</span> <span class="n">vc_tag</span><span class="o">=</span><span class="n">vc_tag</span><span class="p">)</span></div>

<div class="viewcode-block" id="CliActions.send_testdata_command_kw"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.send_testdata_command_kw">[docs]</a>    <span class="k">def</span> <span class="nf">send_testdata_command_kw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wdesc</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">var_sub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">row_num</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">td_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vc_tag</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        UseAsKeyword=No</span>
<span class="sd">        - This will not be listed as a keyword in Katana</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. system_name (string) = name of the system in the input datafile</span>
<span class="sd">            2. session_name(string) = name of the session to the string</span>
<span class="sd">            3. wdesc(string) = Keyword description</span>
<span class="sd">            4. var_sub(string) = the pattern [var_sub] in the testdata commands,\</span>
<span class="sd">                                 start_prompt, end_prompt, verification search\</span>
<span class="sd">                                 will substituted with this value.</span>
<span class="sd">            5. title = title from the testdata file.</span>
<span class="sd">            6. row_num = row from the testdata file.</span>
<span class="sd">            7. td_tag = tag/attribute name of testdata file.</span>
<span class="sd">            8. vc_tag = tag/attribute name of variable config file.</span>
<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)</span>
<span class="sd">            2. response dictionary(dict): a dictionary having the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem. This dictionary\</span>
<span class="sd">                is available in warrior frameworks global data_repository and can be\</span>
<span class="sd">                retrieved using the key= &quot;session_id + _td_response&quot; where\</span>
<span class="sd">                session_id=&quot;system_name+subsystem_name+session_name&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pSubStep</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;System Name: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">))</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Datafile: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">))</span>
        <span class="n">session_id</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_session_id</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
        <span class="n">session_object</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_object_from_datarepository</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span>
        <span class="n">testdata</span><span class="p">,</span> <span class="n">varconfigfile</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_td_vc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">td_tag</span><span class="p">,</span> <span class="n">vc_tag</span><span class="p">)</span>
        <span class="c1">#abspaths = Utils.data_Utils.get_filepath_from_system(self.datafile, system_name,</span>
        <span class="c1">#                                                     &#39;testdata&#39;, &#39;variable_config&#39;)</span>
        <span class="c1">#testdata = abspaths[0]</span>
        <span class="c1">#varconfigfile = abspaths[1]</span>
        <span class="n">td_resp_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">status</span><span class="p">,</span> <span class="n">resp_dict</span> <span class="o">=</span> <span class="n">cli_Utils</span><span class="o">.</span><span class="n">send_commands_from_testdata</span><span class="p">(</span><span class="n">testdata</span><span class="p">,</span> <span class="n">session_object</span><span class="p">,</span>
                                                                  <span class="n">varconfigfile</span><span class="o">=</span><span class="n">varconfigfile</span><span class="p">,</span>
                                                                  <span class="n">var_sub</span><span class="o">=</span><span class="n">var_sub</span><span class="p">,</span>
                                                                  <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="n">row_num</span><span class="p">,</span>
                                                                  <span class="n">system_name</span><span class="o">=</span><span class="n">system_name</span><span class="p">,</span>
                                                                  <span class="n">datafile</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">)</span>

        <span class="n">td_resp_dict</span> <span class="o">=</span> <span class="n">get_object_from_datarepository</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_td_response&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">WarriorCliClass</span><span class="o">.</span><span class="n">cmdprint</span><span class="p">:</span>
            <span class="n">td_resp_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">resp_dict</span><span class="p">)</span>


        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">report_substep_status</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
        <span class="k">return</span>  <span class="n">status</span><span class="p">,</span> <span class="n">td_resp_dict</span></div>

<div class="viewcode-block" id="CliActions.set_session_timeout"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.set_session_timeout">[docs]</a>    <span class="k">def</span> <span class="nf">set_session_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">int_timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the timeout period for the ssh/telnet session</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. system_name(string-mandatory)      = name of the system from the input datafile</span>
<span class="sd">            2. session_name(string)               = name of the session to the system</span>
<span class="sd">            3. int_timeout(integer)               = timeout value in minutes</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Sets the timeout period for the ssh/telnet session&quot;</span>
        <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pSubStep</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">)</span>
        <span class="n">session_id</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_session_id</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
        <span class="n">session_object</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_object_from_datarepository</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">session_object</span><span class="o">.</span><span class="n">isalive</span><span class="p">():</span>
            <span class="n">session_object</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">int_timeout</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Timeout value is set to </span><span class="si">{0}</span><span class="s2">mins for the session with system name : </span><span class="si">{1}</span><span class="s2">,&quot;</span>\
                                       <span class="s2">&quot; session name : </span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">int_timeout</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Session with system name : </span><span class="si">{0}</span><span class="s2">, session name : </span><span class="si">{1}</span><span class="s2">&quot;</span>\
                                       <span class="s2">&quot; is timedout/closed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">status</span></div>

<div class="viewcode-block" id="CliActions.verify_session_status"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.verify_session_status">[docs]</a>    <span class="k">def</span> <span class="nf">verify_session_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks whether the ssh/telnet session is alive or not</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            1. system_name(string-mandatory)      = name of the system from the input datafile</span>
<span class="sd">            2. session_name(string)               = name of the session to the system</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool) : True if alive, False if not alive</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Checks whether the ssh/telnet session is alive or not&quot;</span>
        <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pSubStep</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>
        <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">)</span>
        <span class="n">session_id</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_session_id</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">)</span>
        <span class="n">session_object</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">data_Utils</span><span class="o">.</span><span class="n">get_object_from_datarepository</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">session_object</span><span class="o">.</span><span class="n">isalive</span><span class="p">():</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Session with system name : </span><span class="si">{0}</span><span class="s2">, session name : </span><span class="si">{1}</span><span class="s2">&quot;</span>\
                                       <span class="s2">&quot; is alive&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">Utils</span><span class="o">.</span><span class="n">testcase_Utils</span><span class="o">.</span><span class="n">pNote</span><span class="p">(</span><span class="s2">&quot;Session with system name : </span><span class="si">{0}</span><span class="s2">, session name : </span><span class="si">{1}</span><span class="s2">&quot;</span>\
                                       <span class="s2">&quot; is not alive&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">system_name</span><span class="p">,</span> <span class="n">session_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">status</span></div>

<div class="viewcode-block" id="CliActions.connect_all"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.connect_all">[docs]</a>    <span class="k">def</span> <span class="nf">connect_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is a connect all operation that can connect to  all ssh/telnet based</span>
<span class="sd">        on the conn_type provided by the user in the input datafile.</span>

<span class="sd">        :Datafile usage:</span>

<span class="sd">            Tags or attributes to be used in input datafile for the system or subsystem</span>
<span class="sd">            If both tag and attribute is provided the attribute will be used.</span>

<span class="sd">            1. ip = IP address of the system.\</span>
<span class="sd">            </span>
<span class="sd">                Default value for ip type is ip, it can take any type of ip&#39;s</span>
<span class="sd">                to connect to (like ipv4, ipv6, dns etc)</span>
<span class="sd">                </span>
<span class="sd">                Users can provide tag/attribute for any ip_type under the system</span>
<span class="sd">                in the input datafile and specify the tag/attribute name</span>
<span class="sd">                as the value for ip_type argument, then the connection will be </span>
<span class="sd">                established using that value.</span>
<span class="sd">             </span>
<span class="sd">            2. username = username for the  session.</span>
<span class="sd">            3. password = password for the  session.</span>
<span class="sd">            4. timeout = use if you want to set timeout while connecting,\</span>
<span class="sd">                used for both ssh and telnet</span>
<span class="sd">            5. prompt = for ssh connections, this is the prompt expected when\</span>
<span class="sd">                the connection is successful, not required for telnet.</span>
<span class="sd">            6. conn_type = the type of connection to be created (ssh/telnet).</span>
<span class="sd">            7. ssh_port = use this tag to provide ssh port to connect to, if\</span>
<span class="sd">                not provided default ssh port of 22 will be used.</span>
<span class="sd">            8. telnet_port = use this tag to provide a telnet port to connect to\</span>
<span class="sd">                if not provided default telnet port 23 will be used.</span>


<span class="sd">        :Arguments:</span>
<span class="sd">            None. Keyword will read the input datafile and get the data from tag &lt;system&gt; and &lt;subsystem&gt;.</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)= True / False.</span>
<span class="sd">            2. session_id (dict element)= an id is generated for each connection\</span>
<span class="sd">                and each connection is stored in the framework&#39;s data_repository.\</span>
<span class="sd">                session_id=system_name+subsystem_name+session_name.</span>
<span class="sd">            3. response dictionary(dict): an empty dictionary to store the responses of all\</span>
<span class="sd">                commands sent to the particular system or subsystem.\</span>
<span class="sd">                This dictionary is available in warrior frameworks global data_repository\</span>
<span class="sd">                and can be retrieved using the key= &quot;session_id + _td_response&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Connect to all systems and subsystems in the datafile.&quot;</span>
        <span class="n">pNote</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>

        <span class="n">output_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>
        
        <span class="n">root</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">xml_Utils</span><span class="o">.</span><span class="n">getRoot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">)</span>
        <span class="n">systems</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">)</span>
        <span class="n">system_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">system</span> <span class="ow">in</span> <span class="n">systems</span><span class="p">:</span>
            <span class="c1">#check if the system has subsystem or not.</span>
            <span class="n">subsystems</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;subsystem&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">subsystems</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="k">for</span> <span class="n">subsystem</span> <span class="ow">in</span> <span class="n">subsystems</span><span class="p">:</span>
                    <span class="n">subsystem_name</span> <span class="o">=</span> <span class="n">subsystem</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
                    <span class="n">system_name</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="n">subsystem_name</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
                    <span class="n">system_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>
            <span class="c1">#if there is no subsystem use the system.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">system_name</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
                <span class="n">system_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">system_name</span> <span class="ow">in</span> <span class="n">system_list</span><span class="p">:</span>
            <span class="n">sys_status</span><span class="p">,</span> <span class="n">sys_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">status</span> <span class="ow">and</span> <span class="n">sys_status</span>
            <span class="n">output_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sys_dict</span><span class="p">)</span>        
        <span class="k">return</span> <span class="n">status</span><span class="p">,</span> <span class="n">output_dict</span></div>

<div class="viewcode-block" id="CliActions.disconnect_all"><a class="viewcode-back" href="../../../Actions.CliActions.html#Actions.CliActions.cli_actions.CliActions.disconnect_all">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is a disconnect all operation that can disconnect all ssh/telnet sessions</span>
<span class="sd">        based on the details provided by the user in the input datafile.</span>

<span class="sd">        :Arguments:</span>
<span class="sd">            None. Keyword will read the input datafile and get the data from tag &lt;system&gt; and &lt;subsystem&gt;.</span>

<span class="sd">        :Returns:</span>
<span class="sd">            1. status(bool)= True / False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wdesc</span> <span class="o">=</span> <span class="s2">&quot;Disconnect all systems and subsystems in the datafile.&quot;</span>
        <span class="n">pNote</span><span class="p">(</span><span class="n">wdesc</span><span class="p">)</span>
        <span class="n">status</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">xml_Utils</span><span class="o">.</span><span class="n">getRoot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datafile</span><span class="p">)</span>
        <span class="n">systems</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;system&#39;</span><span class="p">)</span>
        <span class="n">system_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">system</span> <span class="ow">in</span> <span class="n">systems</span><span class="p">:</span>
            <span class="c1">#check if the system has subsystem or not.</span>
            <span class="n">subsystems</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;subsystem&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">subsystems</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="k">for</span> <span class="n">subsystem</span> <span class="ow">in</span> <span class="n">subsystems</span><span class="p">:</span>
                    <span class="n">subsystem_name</span> <span class="o">=</span> <span class="n">subsystem</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
                    <span class="n">system_name</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="n">subsystem_name</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
                    <span class="n">system_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>
            <span class="c1">#if there is no subsystem use the system.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">system_name</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
                <span class="n">system_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">system_name</span> <span class="ow">in</span> <span class="n">system_list</span><span class="p">:</span>
            <span class="n">sys_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">system_name</span><span class="p">)</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">status</span> <span class="ow">and</span> <span class="n">sys_status</span>
        <span class="k">return</span> <span class="n">status</span></div></div>
</pre></div>

           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, FNC.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'Ninja',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>